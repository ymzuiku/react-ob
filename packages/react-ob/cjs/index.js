"use strict";var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var x=(e,t)=>{for(var n in t)c(e,n,{get:t[n],enumerable:!0})},C=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of m(t))!T.call(e,i)&&i!==n&&c(e,i,{get:()=>t[i],enumerable:!(r=h(t,i))||r.enumerable});return e};var g=e=>C(c({},"__esModule",{value:!0}),e);var N={};x(N,{Ob:()=>w,ObProvider:()=>I,ObProvider2:()=>l,channel:()=>d,channelWithStorage:()=>O,isChannel:()=>S,publish:()=>a,useChannel:()=>y});module.exports=g(N);var f=require("react");var u=null;function a(){u&&(clearTimeout(u),u=null),u=setTimeout(()=>{a.update()},16)}a.update=()=>{};a.forceUpdate=()=>{};function d(e){let t=e,n=()=>t;return n.set=r=>{t=r,a()},n}function y(e){return(0,f.useRef)(d(e)).current}function S(e){return typeof e=="function"&&typeof e.set=="function"}function v(e){if(typeof window=="undefined")return;let t=localStorage.getItem(e);if(!!t)try{return JSON.parse(t).j}catch(n){return}}function b(e,t){typeof window!="undefined"&&localStorage.setItem(e,JSON.stringify({j:t}))}function O(e,t){let n=t,r=!1,i=()=>{if(!r){let s=v(e);s!==void 0&&(r=!0,n=s,a())}return n};return i.set=s=>{n=s,a(),b(e,n)},i}var o=require("react");var p=(0,o.createContext)(0);function w({children:e,channels:t}){(0,o.useContext)(p);let n=t.map(r=>r());return(0,o.useMemo)(()=>e(...n),n)}function I({children:e}){let[t,n]=(0,o.useState)(0);return a.update=()=>{n(r=>(r+=1,r>9999&&(r=0),r))},(0,o.createElement)(p.Provider,{children:e,value:t})}var l=class extends o.Component{constructor(n){super(n);this.state={value:0};a.update=()=>{let r=this.state.value+1;r>9999&&(r=0),this.setState(r)},a.forceUpdate=()=>{this.forceUpdate()}}render(){return(0,o.createElement)(p.Provider,{children:this.props.children,value:this.state.value})}};
