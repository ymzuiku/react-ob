import{useRef as c}from"react";var u=null;function o(){u&&(clearTimeout(u),u=null),u=setTimeout(()=>{o.fn()},16)}o.fn=()=>{};function s(e){let t=e,n=()=>t;return n.set=r=>{t=r,o()},n}function y(e){return c(s(e)).current}function b(e){return typeof e=="function"&&typeof e.set=="function"}function f(e){if(typeof window=="undefined")return;let t=localStorage.getItem(e);if(!!t)try{return JSON.parse(t).j}catch(n){return}}function p(e,t){typeof window!="undefined"&&localStorage.setItem(e,JSON.stringify({j:t}))}function v(e,t){let n=t,r=!1,a=()=>{if(!r){let i=f(e);i!==void 0&&(r=!0,n=i,o())}return n};return a.set=i=>{n=i,o(),p(e,n)},a}import{createContext as h,createElement as m,useContext as T,useMemo as d,useState as x}from"react";var l=h(0);function J({children:e,channels:t}){T(l);let n=t.map(r=>r());return d(()=>e(...n),n)}function N({children:e}){let[t,n]=x(0);return o.fn=()=>{n(r=>(r+=1,r>9999&&(r=0),r))},m(l.Provider,{children:e,value:t})}export{J as Ob,N as ObProvider,s as channel,v as channelWithStorage,b as isChannel,o as publish,y as useChannel};
