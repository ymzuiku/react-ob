var l=Object.defineProperty;var i=Object.getOwnPropertySymbols;var a=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var b=(e,n,t)=>n in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,T=(e,n)=>{for(var t in n||(n={}))a.call(n,t)&&b(e,t,n[t]);if(i)for(var t of i(n))v.call(n,t)&&b(e,t,n[t]);return e};import{useEffect as p,useRef as x,useState as k}from"react";function O(e,n){let[t,s]=k(e.val),u=x(n(e.val));return p(()=>{let c=()=>{let f=!1,o=n(e.val);for(let r=0;r<o.length;r++)if(o[r]!==u.current[r]){f=!0;break}u.current=o,f&&s(T({},e.val))};return e.subscribs.add(c),()=>{e.subscribs.delete(c)}},[]),t}function m({data:e,render:n,memo:t}){let s=O(e,t);return n(s)}function w(e){let n=new Set;return{subscribs:n,next:()=>{n.forEach(t=>t())},val:e}}export{w as Ob,m as Ober,O as useOb};
