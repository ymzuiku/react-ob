var l=Object.defineProperty;var i=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;var b=(e,n,r)=>n in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,T=(e,n)=>{for(var r in n||(n={}))v.call(n,r)&&b(e,r,n[r]);if(i)for(var r of i(n))a.call(n,r)&&b(e,r,n[r]);return e};import{useEffect as p,useRef as x,useState as k}from"react";function m(e,n){let[r,s]=k(e.val),u=x(n(e.val));return p(()=>{let c=()=>{let f=!1,o=n(e.val);for(let t=0;t<o.length;t++)if(o[t]!==u.current[t]){f=!0;break}u.current=o,f&&s(T({},e.val))};return e.subscribs.add(c),()=>{e.subscribs.delete(c)}},[]),r}function w({data:e,render:n,memo:r}){let s=m(e,r);return n(s)}function O(e){let n=new Set;return{subscribs:n,next:()=>{n.forEach(r=>r())},val:e}}export{w as Consumer,O as Observer,m as useObserver};
