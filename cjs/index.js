var w=Object.create;var u=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,C=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var y=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&y(e,r,t[r]);if(a)for(var r of a(t))k.call(t,r)&&y(e,r,t[r]);return e};var v=e=>u(e,"__esModule",{value:!0});var E=(e,t)=>{for(var r in t)u(e,r,{get:t[r],enumerable:!0})},T=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of S(t))!p.call(e,o)&&(r||o!=="default")&&u(e,o,{get:()=>t[o],enumerable:!(n=d(t,o))||n.enumerable});return e},A=(e,t)=>T(v(u(e!=null?w(C(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),j=(e=>(t,r)=>e&&e.get(t)||(r=T(v({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var R={};E(R,{Consumer:()=>P,CreateObserver:()=>x,isEqual:()=>l,useCreateObserver:()=>q,useObserver:()=>m});var O=A(require("react"));var f=require("react");var B=typeof Element!="undefined",M=typeof Map=="function",_=typeof Set=="function",z=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let r,n,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!i(e[n],t[n]))return!1;return!0}let s;if(M&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!i(n.value[1],t.get(n.value[0])))return!1;return!0}if(_&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(z&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;if(B&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((o[n]==="_owner"||o[n]==="__v"||o[n]==="__o")&&e.$$typeof)&&!i(e[o[n]],t[o[n]]))return!1;return!0}return e!==e&&t!==t}function l(e,t){try{return i(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}function m(e,t){let[r,n]=(0,f.useState)(e.val),o=(0,f.useRef)(t(e.val));return(0,f.useEffect)(()=>{let s=()=>{let c=t(e.val),g=!l(c,o.current);o.current=c,g&&n(h({},e.val))};return e.subscribs.add(s),()=>{e.subscribs.delete(s)}},[]),r}function P({data:e,children:t,memo:r}){let n=m(e,r);return t(n)}function x(e){let t=new Set,r={subscribs:t,next:n=>{n?Promise.resolve(n(r.val)).then(()=>{t.forEach(o=>o())}):t.forEach(o=>o())},val:e};return r}function q(e,t){return(0,f.useMemo)(()=>x(e),t)}module.exports=j(R);
