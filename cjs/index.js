var d=Object.create;var u=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,C=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var v=(e,t,r)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))E.call(t,r)&&v(e,r,t[r]);return e};var O=e=>u(e,"__esModule",{value:!0});var A=(e,t)=>{for(var r in t)u(e,r,{get:t[r],enumerable:!0})},g=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of k(t))!h.call(e,o)&&(r||o!=="default")&&u(e,o,{get:()=>t[o],enumerable:!(n=S(t,o))||n.enumerable});return e},j=(e,t)=>g(O(u(e!=null?d(C(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),B=(e=>(t,r)=>e&&e.get(t)||(r=g(O({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var V={};A(V,{Consumer:()=>q,CreateObserver:()=>w,isEqual:()=>a,useCreateObserver:()=>R,useObserver:()=>x});var m=j(require("react"));var f=require("react");var M=typeof Element!="undefined",_=typeof Map=="function",z=typeof Set=="function",P=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function l(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let r,n,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!l(e[n],t[n]))return!1;return!0}let s;if(_&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!l(n.value[1],t.get(n.value[0])))return!1;return!0}if(z&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(P&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;if(M&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((o[n]==="_owner"||o[n]==="__v"||o[n]==="__o")&&e.$$typeof)&&!l(e[o[n]],t[o[n]]))return!1;return!0}return e!==e&&t!==t}function a(e,t){try{return l(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}function x(e,t){let[r,n]=(0,f.useState)(e.val),o=(0,f.useRef)(t(e.val));return(0,f.useEffect)(()=>{let s=()=>{let p=!1,c=t(e.val);for(let i=0;i<c.length;i++)if(a(c[i],o.current[i])){p=!0;break}o.current=c,p&&n(T({},e.val))};return e.subscribs.add(s),()=>{e.subscribs.delete(s)}},[]),r}function q({data:e,children:t,memo:r}){let n=x(e,r);return t(n)}function w(e){let t=new Set,r={subscribs:t,next:n=>{n?Promise.resolve(n(r.val)).then(()=>{t.forEach(o=>o())}):t.forEach(o=>o())},val:e};return r}function R(e,t){return(0,f.useMemo)(()=>w(e),t)}module.exports=B(V);
