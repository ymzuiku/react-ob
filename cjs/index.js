var i=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var v=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))h.call(t,r)&&v(e,r,t[r]);if(p)for(var r of p(t))m.call(t,r)&&v(e,r,t[r]);return e};var d=e=>i(e,"__esModule",{value:!0});var S=(e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})},k=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of x(t))!h.call(e,o)&&(r||o!=="default")&&i(e,o,{get:()=>t[o],enumerable:!(n=w(t,o))||n.enumerable});return e};var C=(e=>(t,r)=>e&&e.get(t)||(r=k(d({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var z={};S(z,{Consumer:()=>M,CreateObserver:()=>g,isEqual:()=>a,useCreateObserver:()=>_,useObserver:()=>O});var f=require("react");var E=typeof Element!="undefined",A=typeof Map=="function",j=typeof Set=="function",B=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function l(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let r,n,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!l(e[n],t[n]))return!1;return!0}let s;if(A&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!l(n.value[1],t.get(n.value[0])))return!1;return!0}if(j&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(B&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;if(E&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((o[n]==="_owner"||o[n]==="__v"||o[n]==="__o")&&e.$$typeof)&&!l(e[o[n]],t[o[n]]))return!1;return!0}return e!==e&&t!==t}function a(e,t){try{return l(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}function O(e,t){let[r,n]=(0,f.useState)(e.val),o=(0,f.useRef)(t(e.val));return(0,f.useEffect)(()=>{let s=()=>{let y=!1,c=t(e.val);for(let u=0;u<c.length;u++)if(a(c[u],o.current[u])){y=!0;break}o.current=c,y&&n(T({},e.val))};return e.subscribs.add(s),()=>{e.subscribs.delete(s)}},[]),r}function M({data:e,children:t,memo:r}){let n=O(e,r);return t(n)}function g(e){let t=new Set,r={subscribs:t,next:n=>{n?Promise.resolve(n(r.val)).then(()=>{t.forEach(o=>o())}):t.forEach(o=>o())},val:e};return r}function _(e,t){return(0,f.useMemo)(()=>g(e),t)}module.exports=C(z);
